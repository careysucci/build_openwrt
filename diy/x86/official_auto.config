CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y
CONFIG_USES_EXT4=y
#
# Image Options
#
CONFIG_TARGET_KERNEL_PARTSIZE=256
CONFIG_TARGET_ROOTFS_PARTSIZE=500

#
# Root filesystem images
#
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_EXT4_BLOCKSIZE_4K=y
CONFIG_TARGET_EXT4_BLOCKSIZE=4096
CONFIG_TARGET_EXT4_JOURNAL=y
CONFIG_TARGET_UBIFS_FREE_SPACE_FIXUP=y
CONFIG_GRUB_IMAGES=y
CONFIG_GRUB_EFI_IMAGES=y
CONFIG_VDI_IMAGES=y
CONFIG_TARGET_ROOTFS_TARGZ=y
CONFIG_TARGET_IMAGES_GZIP=y

#
# Translations
#
CONFIG_LUCI_LANG_zh_Hans=y

# disable rust
CONFIG_PACKAGE_luci-app-ssr-plus_INCLUDE_Shadowsocks_Rust_Client=n

#
# CPU & Kernel Capability
#
CONFIG_PACKAGE_irqbalance=y
CONFIG_KERNEL_SMP=y
CONFIG_KERNEL_NO_HZ_FULL=y
CONFIG_KERNEL_CGROUPS=y
CONFIG_KERNEL_CGROUP_SCHED=y
CONFIG_KERNEL_SCHED_AUTOGROUP=y
CONFIG_KERNEL_XPS=y
CONFIG_KERNEL_RPS=y
CONFIG_KERNEL_NETFILTER_NETLINK_GLUE_CT=y

#
# Intel 网卡驱动（非常关键）
#
CONFIG_PACKAGE_kmod-e1000=y
CONFIG_PACKAGE_kmod-e1000e=y
CONFIG_PACKAGE_kmod-igb=y
CONFIG_PACKAGE_kmod-ixgbe=y
CONFIG_PACKAGE_kmod-i40e=y
CONFIG_PACKAGE_kmod-iavf=y

#
# PPPoE 必要模块
#
CONFIG_PACKAGE_ppp=y
CONFIG_PACKAGE_pppoe=y
CONFIG_PACKAGE_kmod-ppp=y
CONFIG_PACKAGE_kmod-pppoe=y
CONFIG_PACKAGE_kmod-pppox=y
CONFIG_PACKAGE_luci-proto-ppp=y

#
# Flow Offload（官方加速）
#
CONFIG_PACKAGE_kmod-nft-core=y
CONFIG_PACKAGE_kmod-nft-offload=y
CONFIG_PACKAGE_kmod-nft-flow-offload=y
CONFIG_PACKAGE_kmod-nft-nat=y

#
# 防火墙（官方）
#
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_kmod-nft-compat=y
CONFIG_PACKAGE_kmod-nft-fib=y

#
# 网络加速相关组件
#
CONFIG_PACKAGE_kmod-tcp-bbr=y
CONFIG_PACKAGE_kmod-tcp-hybla=y
CONFIG_PACKAGE_kmod-tcp-yeah=y

#
# 多核中断优化
#
CONFIG_PACKAGE_kmod-sched-core=y
CONFIG_PACKAGE_kmod-sch-fq_codel=y

# Virtio (VM/Proxmox) support
#
CONFIG_PACKAGE_kmod-virtio=y
CONFIG_PACKAGE_kmod-virtio-net=y
CONFIG_PACKAGE_kmod-virtio-net-pci=y

#
# LuCI 必备
#
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-ssl=y
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-mod-network=y
CONFIG_PACKAGE_luci-mod-status=y
CONFIG_PACKAGE_luci-mod-system=y
CONFIG_PACKAGE_luci-theme-bootstrap=y

#
# 系统工具
#
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_ethtool=y
CONFIG_PACKAGE_netperf=y
CONFIG_PACKAGE_iperf3=y

#
# 存储
#
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-fs-ext4=y

#
# 关闭不必要的 x86 大包（精简）
#
CONFIG_PACKAGE_kmod-ath9k-common=n
CONFIG_PACKAGE_kmod-ath10k=n
CONFIG_PACKAGE_kmod-rtl8821ae=n
CONFIG_PACKAGE_kmod-rtl8xxxu=n
CONFIG_PACKAGE_kmod-rt2800-usb=n
CONFIG_PACKAGE_kmod-rt2x00-usb=n


# r8125 often comes from community package; include kmod-r8169 as fallback
CONFIG_PACKAGE_kmod-r8169=y

#
# Optional drivers often provided by community packages (you may need to add feeds)
# - r8125 may not be in mainline; if you use external feeds, enable package_kmod-r8125
#
# Misc
CONFIG_PACKAGE_kmod-r8125=y
CONFIG_PACKAGE_kmod-sched-core=y
CONFIG_PACKAGE_kmod-sch-fq_codel=y
CONFIG_PACKAGE_kmod-tcp-bbr=y


#
# 内核调优（提高队列、缓冲系统吞吐）
#
CONFIG_KERNEL_NET_RX_BUSY_POLL=y
CONFIG_KERNEL_NET_RX_BUSY_POLL_TUNING=y
CONFIG_KERNEL_NETDEVICES_MULTIQUEUE=y

#
# Keep image reasonably small
#
CONFIG_TARGET_IMAGES_TARGZ=y

# extend package
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-app-nikki=y
CONFIG_PACKAGE_luci-app-nlbwmon=y
CONFIG_PACKAGE_luci-app-netspeedtest=y
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_luci-app-minidlna=y
CONFIG_PACKAGE_luci-app-eqos=y
CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_luci-app-openclash=y

# Themes
CONFIG_PACKAGE_luci-theme-argon=y